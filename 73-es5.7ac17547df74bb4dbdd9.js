!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(self.webpackChunkappdemo_ng12=self.webpackChunkappdemo_ng12||[]).push([[73],{58073:function(t,i,r){r.r(i),r.d(i,{RuleManagementModule:function(){return M}});var o=r(62224),u=r(90030),a=r(28127),l=r(47112),c=r(75688),s=r(57147),g=r(82185),d=r(29168);function Z(e,t){1&e&&(s.TgZ(0,"div"),s.TgZ(1,"h4",23),s._uU(2,"New Rule"),s.qZA(),s.qZA())}function f(e,t){1&e&&(s.TgZ(0,"h4",23),s._uU(1,"Edit Rule"),s.qZA())}function h(e,t){1&e&&(s.TgZ(0,"div",25),s._uU(1,"*rule name required"),s.qZA())}function p(e,t){if(1&e&&(s.TgZ(0,"div"),s.YNc(1,h,2,0,"div",24),s.qZA()),2&e){var n=s.oxw();s.xp6(1),s.Q6J("ngIf",n.f.RULE_NAME.errors.required)}}function m(e,t){1&e&&s._UZ(0,"span")}var v,A=function(e){return{"is-invalid":e}},b=((v=function(){function t(n,i,r,o,u){e(this,t),this.formBuilder=n,this.route=i,this.router=r,this.ruleService=o,this.alertService=u,this.subs=new c.Y,this.loading=!1,this.submitted=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({RULE_NAME:["",a.kI.required],USER_MGMT:[""],ACTIVITY_MGMT:[""],LEADERBOARDS_PAGE:[""],CONTENT_MGMT:[""],PIPELINES_PAGE:[""],REVENUE_LEADERBOARD:[""]}),this.isAddMode||this.subs.add(this.ruleService.getByID(this.id).subscribe(function(t){return e.form.patchValue(t)}))}},{key:"f",get:function(){return this.form.controls}},{key:"onSubmit",value:function(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createRole():this.updateRule())}},{key:"createRole",value:function(){var e=this;this.alertService.loading(),this.subs.add(this.ruleService.register(this.form.value).pipe((0,l.P)()).subscribe({next:function(){e.alertService.success(),e.router.navigate(["../"],{relativeTo:e.route})},error:function(t){e.alertService.error(t),e.loading=!1}}))}},{key:"updateRule",value:function(){var e=this;this.alertService.loading(),this.subs.add(this.ruleService.update(this.id,this.form.value).pipe((0,l.P)()).subscribe({next:function(){e.alertService.success(),e.router.navigate(["../../"],{relativeTo:e.route})},error:function(t){e.alertService.error(t),e.loading=!1}}))}},{key:"getRandomInt",value:function(e){return Math.floor(Math.random()*e)}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}}]),t}()).\u0275fac=function(e){return new(e||v)(s.Y36(a.qu),s.Y36(u.gz),s.Y36(u.F0),s.Y36(g.P),s.Y36(d.c))},v.\u0275cmp=s.Xpm({type:v,selectors:[["ng-component"]],decls:59,vars:9,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[4,"ngIf","ngIfElse"],["editMode",""],["routerLink","/rule-management",1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm"],[1,"lni","lni-chevron-left","mr-5"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6"],[1,"card-style","mb-30"],[1,"divider"],[1,"input-style-1"],["type","text","formControlName","RULE_NAME",3,"ngClass"],[4,"ngIf"],[1,"form-check","form-switch","toggle-switch","mb-30"],["formControlName","USER_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["for","toggleSwitch1",1,"form-check-label"],["formControlName","ACTIVITY_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","CONTENT_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","LEADERBOARDS_PAGE","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","PIPELINES_PAGE","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","REVENUE_LEADERBOARD","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["routerLink","/rule-management",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover","btn-sm"],[1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm",3,"disabled"],[1,"mr-40"],["style","color:red",4,"ngIf"],[2,"color","red"]],template:function(e,t){if(1&e&&(s.TgZ(0,"div",0),s.YNc(1,Z,3,0,"div",1),s.YNc(2,f,2,0,"ng-template",null,2,s.W1O),s.TgZ(4,"button",3),s._UZ(5,"i",4),s._uU(6,"Back"),s.qZA(),s.qZA(),s.TgZ(7,"div",5),s.TgZ(8,"form",6),s.NdJ("ngSubmit",function(){return t.onSubmit()}),s.TgZ(9,"div",7),s.TgZ(10,"div",8),s.TgZ(11,"h5"),s._uU(12,"Rule Description"),s.qZA(),s.TgZ(13,"span",9),s._UZ(14,"hr"),s.qZA(),s.TgZ(15,"div",10),s.TgZ(16,"label"),s._uU(17," Role Name "),s.qZA(),s._UZ(18,"input",11),s.YNc(19,p,2,1,"div",12),s.qZA(),s.TgZ(20,"span",9),s._UZ(21,"hr"),s.qZA(),s.TgZ(22,"h5"),s._uU(23,"Rule Privileges"),s.qZA(),s.TgZ(24,"span",9),s._UZ(25,"hr"),s.qZA(),s.TgZ(26,"div",13),s._UZ(27,"input",14),s.TgZ(28,"label",15),s._uU(29,"User Management"),s.qZA(),s.qZA(),s.TgZ(30,"div",13),s._UZ(31,"input",16),s.TgZ(32,"label",15),s._uU(33,"Activity Management"),s.qZA(),s.qZA(),s.TgZ(34,"div",13),s._UZ(35,"input",17),s.TgZ(36,"label",15),s._uU(37,"Content Management"),s.qZA(),s.qZA(),s.TgZ(38,"div",13),s._UZ(39,"input",18),s.TgZ(40,"label",15),s._uU(41,"Access Leaderboards"),s.qZA(),s.qZA(),s.TgZ(42,"div",13),s._UZ(43,"input",19),s.TgZ(44,"label",15),s._uU(45,"View Pipelines"),s.qZA(),s.qZA(),s.TgZ(46,"div",13),s._UZ(47,"input",20),s.TgZ(48,"label",15),s._uU(49,"View BP's Revenue Leaderboards"),s.qZA(),s.qZA(),s.TgZ(50,"span",9),s._UZ(51,"hr"),s.qZA(),s.TgZ(52,"div"),s.TgZ(53,"button",21),s._uU(54," Cancel "),s.qZA(),s._uU(55,"\xa0 "),s.TgZ(56,"button",22),s.YNc(57,m,1,0,"span",12),s._uU(58," \xa0Save\xa0 "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){var n=s.MAs(3);s.xp6(1),s.Q6J("ngIf",!t.id)("ngIfElse",n),s.xp6(7),s.Q6J("formGroup",t.form),s.xp6(10),s.Q6J("ngClass",s.VKq(7,A,t.submitted&&t.f.RULE_NAME.errors)),s.xp6(1),s.Q6J("ngIf",t.submitted&&t.f.RULE_NAME.errors),s.xp6(37),s.Q6J("disabled",t.loading),s.xp6(1),s.Q6J("ngIf",t.loading)}},directives:[o.O5,u.rH,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,o.mk,a.Wl],encapsulation:2}),v),T=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&s._UZ(0,"router-outlet")},directives:[u.lC],encapsulation:2}),t}(),q=r(74693),_=r.n(q),U=r(41569),E=r(7333),y=r(94968);function x(e,t){1&e&&(s.TgZ(0,"span"),s._UZ(1,"i",29),s.qZA())}function R(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"tr"),s.TgZ(1,"td"),s.TgZ(2,"div",23),s.TgZ(3,"button",24),s._UZ(4,"i",25),s.qZA(),s._uU(5,"\xa0 "),s.TgZ(6,"button",26),s.NdJ("click",function(){var e=s.CHM(n).$implicit;return s.oxw().confirmBox("delete",e)}),s.YNc(7,x,2,0,"span",27),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"td",28),s.TgZ(9,"p"),s._uU(10),s.qZA(),s.qZA(),s.qZA()}if(2&e){var i=t.$implicit;s.xp6(3),s.MGl("routerLink","edit/",i.RULE_ID,""),s.xp6(3),s.Q6J("disabled",i.isDeleting),s.xp6(1),s.Q6J("ngIf",!i.isDeleting),s.xp6(3),s.Oqu(i.RULE_NAME)}}var w=function(e,t){return{itemsPerPage:e,currentPage:t}},k=[{path:"rule-management",component:T,children:[{path:"",component:function(){var t=function(){function t(n,i){e(this,t),this.service=n,this.alertService=i,this.rules=null,this.subs=new c.Y,this.p=1,this.count=10,this.countdata=null}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.subs.add(this.service.getAll().subscribe(function(t){e.rules=t,e.countdata=e.rules.length}))}},{key:"deleteRule",value:function(e){var t=this;this.alertService.loading();var n=this.rules.find(function(t){return t.RULE_ID===e.RULE_ID});this.subs.add(this.service.delete(e.RULE_ID).subscribe(function(){n.isDeleting=!0,t.rules=t.rules.filter(function(t){return t.RULE_ID!==e.RULE_ID}),t.countdata=t.rules.length,t.alertService.success()},function(e){t.alertService.error(e)}))}},{key:"confirmBox",value:function(e,t){var n=this;"delete"==e&&_().fire({title:"Are you sure want to delete?",text:t.RULE_NAME,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes!",cancelButtonText:"Cancel"}).then(function(e){e.value&&n.deleteRule(t)})}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Y36(g.P),s.Y36(U.c9))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-rule-management"]],decls:44,vars:12,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","add",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-plus","mr-5"],[1,"row"],[1,"col-lg-12"],[1,"card-style","mb-30"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","py-3"],[1,"left"],[1,"right"],[1,"table-search","d-flex"],["action","#"],["type","text","name","something","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"lni","lni-search-alt"],[1,"table-wrapper","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"pt-10","d-flex","flex-wrap","justify-content-between"],[1,"text-sm","text-gray"],[1,"text-right"],[3,"pageChange"],[1,"action"],[1,"text-primary",2,"cursor","pointer",3,"routerLink"],[1,"lni","lni-pencil-alt"],[1,"text-danger",3,"disabled","click"],[4,"ngIf"],[1,"min-width"],[1,"lni","lni-trash-can"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"h4",1),s._uU(2,"Rule Management"),s.qZA(),s.TgZ(3,"button",2),s._UZ(4,"i",3),s._uU(5," Add "),s.qZA(),s.qZA(),s.TgZ(6,"div",4),s.TgZ(7,"div",5),s.TgZ(8,"div",6),s.TgZ(9,"div",7),s._UZ(10,"div",8),s.qZA(),s.TgZ(11,"div",9),s.TgZ(12,"div",10),s.TgZ(13,"p"),s._uU(14,"Show "),s.TgZ(15,"span"),s._uU(16,"10"),s.qZA(),s._uU(17," entries"),s.qZA(),s.qZA(),s.TgZ(18,"div",11),s.TgZ(19,"div",12),s.TgZ(20,"form",13),s.TgZ(21,"input",14),s.NdJ("ngModelChange",function(e){return t.filterdata=e}),s.qZA(),s.TgZ(22,"button"),s._UZ(23,"i",15),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(24,"div",16),s.TgZ(25,"table",17),s.TgZ(26,"thead"),s.TgZ(27,"tr"),s.TgZ(28,"th"),s.TgZ(29,"h6"),s._uU(30,"Action"),s.qZA(),s.qZA(),s.TgZ(31,"th"),s.TgZ(32,"h6"),s._uU(33,"Rule Name"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(34,"tbody"),s.YNc(35,R,11,4,"tr",18),s.ALo(36,"paginate"),s.ALo(37,"filter"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(38,"div",19),s.TgZ(39,"div",10),s.TgZ(40,"p",20),s._uU(41),s.qZA(),s.qZA(),s.TgZ(42,"div",21),s.TgZ(43,"pagination-controls",22),s.NdJ("pageChange",function(e){return t.p=e}),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(21),s.Q6J("ngModel",t.filterdata),s.xp6(14),s.Q6J("ngForOf",s.xi3(36,3,s.xi3(37,6,t.rules,t.filterdata),s.WLB(9,w,t.count,t.p))),s.xp6(6),s.hij("Total ",t.countdata," Rule Data"))},directives:[u.rH,a._Y,a.JL,a.F,a.Fj,a.JJ,a.On,o.sg,E.LS,o.O5],pipes:[E._s,y.Z],styles:[""]}),t}()},{path:"add",component:b},{path:"edit/:id",component:b}]}],S=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[u.Bz.forChild(k)],u.Bz]}),t}(),M=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.ez,S,a.UX,a.u5,E.JX,y.h]]}),t}()}}])}();