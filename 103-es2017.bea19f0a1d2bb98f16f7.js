"use strict";(self.webpackChunkappdemo_ng12=self.webpackChunkappdemo_ng12||[]).push([[103],{6103:function(e,t,i){i.r(t),i.d(t,{UserManagementModule:function(){return fe}});var s=i(28127),r=i(62224),n=i(90030),o=i(47112),a=i(75688),l=i(41037),u=i(57147),c=i(54037),d=i(41569),g=i(82185),p=i(67393),Z=i(63620);let f=(()=>{class e{constructor(e){this.http=e}getAll(){return this.http.get(`${l.N.apiUrl}/contact`)}getByID(e){return this.http.get(`${l.N.apiUrl}/contact/${e}`)}getByCompany(e){return this.http.get(`${l.N.apiUrl}/contact/getbycompany/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(Z.eN))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var A=i(73546),m=i(32543);function h(e,t){1&e&&(u.TgZ(0,"h4",25),u._uU(1,"New Users"),u.qZA())}function T(e,t){1&e&&(u.TgZ(0,"h4",25),u._uU(1,"Edit Users"),u.qZA())}function v(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",19),u.TgZ(1,"label"),u._uU(2,"Company"),u.qZA(),u.TgZ(3,"ng-select",26),u.NdJ("change",function(t){return u.CHM(e),u.oxw().onCompanySelected(t)}),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("items",e.bp)("multiple",!1)}}function N(e,t){1&e&&(u.TgZ(0,"div",12),u.TgZ(1,"label"),u._uU(2,"Company"),u.qZA(),u._UZ(3,"input",27),u.qZA())}const q=function(){return{standalone:!0}};function b(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",19),u.TgZ(1,"label"),u._uU(2,"Email"),u.qZA(),u.TgZ(3,"ng-select",28),u.NdJ("change",function(t){return u.CHM(e),u.oxw().onSelection(t)})("ngModelChange",function(t){return u.CHM(e),u.oxw().selectemail=t}),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("items",e.contact)("multiple",!1)("ngModel",e.selectemail)("ngModelOptions",u.DdM(4,q))}}function _(e,t){1&e&&(u.TgZ(0,"div",12),u.TgZ(1,"label"),u._uU(2,"Email"),u.qZA(),u._UZ(3,"input",29),u.qZA())}function I(e,t){1&e&&(u.TgZ(0,"div",12),u.TgZ(1,"label"),u._uU(2,"USERNAME"),u.qZA(),u._UZ(3,"input",30),u.qZA())}function x(e,t){1&e&&(u.TgZ(0,"em"),u._uU(1,"(Default Password is email)"),u.qZA())}function C(e,t){1&e&&(u.TgZ(0,"div",34),u._uU(1,"Password is required"),u.qZA())}function S(e,t){1&e&&(u.TgZ(0,"div",34),u._uU(1,"Password must be at least 6 characters"),u.qZA())}function U(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,C,2,0,"div",33),u.YNc(2,S,2,0,"div",33),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngIf",e.f.PASSWORD.errors.required),u.xp6(1),u.Q6J("ngIf",e.f.PASSWORD.errors.minlength)}}const M=function(e){return{"is-invalid":e}};function E(e,t){if(1&e&&(u.TgZ(0,"div",12),u.TgZ(1,"label",31),u._uU(2," Password "),u.YNc(3,x,2,0,"em",11),u.qZA(),u._UZ(4,"input",32),u.YNc(5,U,3,2,"div",11),u.qZA()),2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngIf",e.isAddMode),u.xp6(1),u.Q6J("ngClass",u.VKq(3,M,e.submitted&&e.f.PASSWORD.errors)),u.xp6(1),u.Q6J("ngIf",e.submitted&&e.f.PASSWORD.errors)}}function O(e,t){1&e&&(u.TgZ(0,"div",34),u._uU(1,"*First Name required"),u.qZA())}function P(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,O,2,0,"div",33),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngIf",e.f.FIRST_NAME.errors.required)}}function y(e,t){1&e&&(u.TgZ(0,"div",34),u._uU(1,"*Last Name required"),u.qZA())}function Y(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,y,2,0,"div",33),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngIf",e.f.LAST_NAME.errors.required)}}function w(e,t){1&e&&(u.TgZ(0,"div",34),u._uU(1,"*Phone No. required"),u.qZA())}function J(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,w,2,0,"div",33),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngIf",e.f.PHONE.errors.required)}}function D(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"div",12),u.TgZ(2,"label"),u._uU(3,"First Name"),u.qZA(),u._UZ(4,"input",35),u.YNc(5,P,2,1,"div",11),u.qZA(),u.TgZ(6,"div",12),u.TgZ(7,"label"),u._uU(8,"Last Name"),u.qZA(),u._UZ(9,"input",36),u.YNc(10,Y,2,1,"div",11),u.qZA(),u.TgZ(11,"div",12),u.TgZ(12,"label"),u._uU(13,"Phone No."),u.qZA(),u._UZ(14,"input",37),u.YNc(15,J,2,1,"div",11),u.qZA(),u.qZA()),2&e){const e=u.oxw();u.xp6(4),u.Q6J("ngClass",u.VKq(6,M,e.submitted&&e.f.FIRST_NAME.errors)),u.xp6(1),u.Q6J("ngIf",e.submitted&&e.f.FIRST_NAME.errors),u.xp6(4),u.Q6J("ngClass",u.VKq(8,M,e.submitted&&e.f.LAST_NAME.errors)),u.xp6(1),u.Q6J("ngIf",e.submitted&&e.f.LAST_NAME.errors),u.xp6(4),u.Q6J("ngClass",u.VKq(10,M,e.submitted&&e.f.PHONE.errors)),u.xp6(1),u.Q6J("ngIf",e.submitted&&e.f.PHONE.errors)}}function R(e,t){1&e&&(u.TgZ(0,"div",34),u._uU(1,"*First Name required"),u.qZA())}function Q(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,R,2,0,"div",33),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngIf",e.f.FIRST_NAME.errors.required)}}function F(e,t){1&e&&(u.TgZ(0,"div",34),u._uU(1,"*Last Name required"),u.qZA())}function L(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,F,2,0,"div",33),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngIf",e.f.LAST_NAME.errors.required)}}function k(e,t){1&e&&(u.TgZ(0,"div",34),u._uU(1,"*Phone No. required"),u.qZA())}function V(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,k,2,0,"div",33),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngIf",e.f.PHONE.errors.required)}}function B(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"div",12),u.TgZ(2,"label"),u._uU(3,"First Name"),u.qZA(),u._UZ(4,"input",38),u.YNc(5,Q,2,1,"div",11),u.qZA(),u.TgZ(6,"div",12),u.TgZ(7,"label"),u._uU(8,"Last Name"),u.qZA(),u._UZ(9,"input",39),u.YNc(10,L,2,1,"div",11),u.qZA(),u.TgZ(11,"div",12),u.TgZ(12,"label"),u._uU(13,"Phone No."),u.qZA(),u._UZ(14,"input",40),u.YNc(15,V,2,1,"div",11),u.qZA(),u.qZA()),2&e){const e=u.oxw();u.xp6(4),u.Q6J("ngClass",u.VKq(6,M,e.submitted&&e.f.FIRST_NAME.errors)),u.xp6(1),u.Q6J("ngIf",e.submitted&&e.f.FIRST_NAME.errors),u.xp6(4),u.Q6J("ngClass",u.VKq(8,M,e.submitted&&e.f.LAST_NAME.errors)),u.xp6(1),u.Q6J("ngIf",e.submitted&&e.f.LAST_NAME.errors),u.xp6(4),u.Q6J("ngClass",u.VKq(10,M,e.submitted&&e.f.PHONE.errors)),u.xp6(1),u.Q6J("ngIf",e.submitted&&e.f.PHONE.errors)}}function H(e,t){1&e&&(u.TgZ(0,"div",46),u._UZ(1,"div",47),u.qZA())}function K(e,t){1&e&&(u.TgZ(0,"div",48),u._uU(1," Image Uploaded Succesfuly!"),u.qZA())}function W(e,t){1&e&&(u.TgZ(0,"div",49),u._uU(1," Image Upload Failed!"),u.qZA())}const $=function(e){return{"background-image":e}};function j(e,t){if(1&e&&(u.TgZ(0,"div",41),u._UZ(1,"div",42),u.YNc(2,H,2,0,"div",43),u.YNc(3,K,2,0,"div",44),u.YNc(4,W,2,0,"div",45),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Gre("img-preview","fail"===e.selectedFile.status?"-error":"",""),u.Q6J("ngStyle",u.VKq(7,$,"url("+e.selectedFile.src+")")),u.xp6(1),u.Q6J("ngIf",e.selectedFile.pending),u.xp6(1),u.Q6J("ngIf","ok"===e.selectedFile.status),u.xp6(1),u.Q6J("ngIf","fail"===e.selectedFile.status)}}function G(e,t){1&e&&(u.TgZ(0,"div",34),u._uU(1,"*Picture required"),u.qZA())}function z(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,G,2,0,"div",33),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",e.f.PICTURE.errors.required)}}function X(e,t){1&e&&(u.TgZ(0,"div",34),u._uU(1,"*Discord ID required"),u.qZA())}function ee(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,X,2,0,"div",33),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",e.f.DISCORD_ID.errors.required)}}function te(e,t){if(1&e&&(u.TgZ(0,"option",50),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.RULE_ID),u.xp6(1),u.Oqu(e.RULE_NAME)}}function ie(e,t){1&e&&u._UZ(0,"span")}class se{constructor(e,t){this.src=e,this.file=t,this.pending=!1,this.status="init"}}let re=(()=>{class e{constructor(e,t,i,s,r,n,o,u,c){this.formBuilder=e,this.route=t,this.router=i,this.usersService=s,this.alertService=r,this.ruleManagementService=n,this.bpService=o,this.contactService=u,this.imageService=c,this.subs=new a.Y,this.loading=!1,this.submitted=!1,this.selectedBPName=null,this.rules=null,this.bp=null,this.contact=null,this.apiurl=l.N.apiUrl,this.selectemail=null,this.isVTI=!1,this.isSuperUser=!1,this.rulelocal=JSON.parse(localStorage.getItem("2"))}ngOnInit(){this.rulelocal.ISSUPERADMIN&&(this.isSuperUser=!0),this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;const e=[s.kI.minLength(6)];this.isAddMode&&e.push(s.kI.required),this.form=this.formBuilder.group({USERNAME:["",s.kI.required],PASSWORD:["",e],FIRST_NAME:["",s.kI.required],LAST_NAME:["",s.kI.required],COMPANY_ID:["",s.kI.required],COMPANY_NAME:["",s.kI.required],PHONE:["",s.kI.required],BIO:["",s.kI.required],PICTURE:["",s.kI.required],RULE_ID:["",s.kI.required],DISCORD_ID:["",s.kI.required]}),this.isAddMode||this.subs.add(this.usersService.getById(this.id).pipe((0,o.P)()).subscribe(e=>{this.form.patchValue(e)})),this.subs.add(this.ruleManagementService.getAll().subscribe(e=>this.rules=e)),this.subs.add(this.bpService.getAll().subscribe(e=>this.bp=e))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createUser():this.updateUser())}onCompanySelected(e){37891===parseInt(e.COMPANY_ID)&&1==this.isSuperUser?(this.isVTI=!0,this.form.get("COMPANY_ID").setValue(e.COMPANY_ID),this.form.get("COMPANY_NAME").setValue(e.COMPANY_NAME),this.setEmptyvalue()):(this.isVTI=!1,this.subs.add(this.contactService.getByCompany(e.COMPANY_ID).subscribe(e=>this.contact=e)),this.form.get("COMPANY_ID").setValue(e.COMPANY_ID),this.form.get("COMPANY_NAME").setValue(e.COMPANY_NAME),this.setEmptyvalue())}onSelection(e){1==e.CONTACT_NAME.split(" ").length?this.form.get("FIRST_NAME").setValue(e.CONTACT_NAME):this.form.get("FIRST_NAME").setValue(e.CONTACT_NAME.substr(0,e.CONTACT_NAME.indexOf(" "))),""!=e.CONTACT_NAME.substr(e.CONTACT_NAME.indexOf(" ")+1)?this.form.get("LAST_NAME").setValue(e.CONTACT_NAME.substr(e.CONTACT_NAME.indexOf(" ")+1)):this.form.get("LAST_NAME").setValue(e.CONTACT_NAME.substr(0,e.CONTACT_NAME.indexOf(" "))),this.form.get("PASSWORD").setValue(e.EMAIL),this.form.get("USERNAME").setValue(e.EMAIL),this.form.get("PHONE").setValue(e.PHONE01)}createUser(){this.alertService.loading(),this.subs.add(this.usersService.register(this.form.value).pipe((0,o.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["../"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}}))}updateUser(){this.alertService.loading(),this.subs.add(this.usersService.update(this.id,this.form.value).pipe((0,o.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["../../"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}}))}onSuccess(){this.selectedFile.pending=!1,this.selectedFile.status="ok"}onError(){this.selectedFile.pending=!1,this.selectedFile.status="fail",this.selectedFile.src=""}processFile(e){const t=e.files[0],i=new FileReader;this.form.value.PICTURE&&this.imageService.deleteImage(this.form.value.PICTURE).pipe((0,o.P)()).subscribe(),i.addEventListener("load",e=>{this.selectedFile=new se(e.target.result,t),this.imageService.uploadImage(this.selectedFile.file).subscribe(e=>{this.form.get("PICTURE").setValue(e.filename),this.onSuccess()},e=>{this.onError()})}),i.readAsDataURL(t)}setEmptyvalue(){this.form.get("FIRST_NAME").setValue(""),this.form.get("LAST_NAME").setValue(""),this.form.get("PHONE").setValue(""),this.form.get("BIO").setValue(""),this.form.get("DISCORD_ID").setValue(""),this.form.get("PASSWORD").setValue(""),this.selectemail=""}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(s.qu),u.Y36(n.gz),u.Y36(n.F0),u.Y36(c.x),u.Y36(d.c9),u.Y36(g.P),u.Y36(p.m),u.Y36(f),u.Y36(A.C))},e.\u0275cmp=u.Xpm({type:e,selectors:[["ng-component"]],decls:55,vars:26,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],["class","mr-40",4,"ngIf"],["routerLink","/user-management",1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm"],[1,"lni","lni-chevron-left","mr-5"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6"],[1,"card-style","mb-30"],[1,"divider"],["class","select-style-1",4,"ngIf"],["class","input-style-1",4,"ngIf"],[4,"ngIf"],[1,"input-style-1"],["formControlName","BIO","placeholder","Message","rows","5",3,"ngClass"],["type","file","accept","image/*",3,"change"],["imageInput",""],["class","img-preview-container",4,"ngIf"],["type","text","formControlName","PICTURE","disabled","",3,"ngClass"],["type","number","formControlName","DISCORD_ID",3,"ngClass"],[1,"select-style-1"],[1,"select-position"],["formControlName","RULE_ID"],[3,"value",4,"ngFor","ngForOf"],["routerLink","/user-management",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover","btn-sm"],[1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm",3,"disabled"],[1,"mr-40"],["bindLabel","COMPANY_NAME","placeholder","Search Company","appendTo","body",3,"items","multiple","change"],["type","text","formControlName","COMPANY_NAME","disabled",""],["bindLabel","EMAIL","placeholder","Search Email","appendTo","body",3,"items","multiple","ngModel","ngModelOptions","change","ngModelChange"],["type","text","formControlName","USERNAME"],["type","text","formControlName","USERNAME","disabled",""],["for","PASSWORD"],["type","password","formControlName","PASSWORD",3,"ngClass"],["style","color:red",4,"ngIf"],[2,"color","red"],["type","text","formControlName","FIRST_NAME",3,"ngClass"],["type","text","formControlName","LAST_NAME",3,"ngClass"],["type","text","formControlName","PHONE",3,"ngClass"],["type","text","formControlName","FIRST_NAME","disabled","",3,"ngClass"],["type","text","formControlName","LAST_NAME","disabled","",3,"ngClass"],["type","text","formControlName","PHONE","disabled","",3,"ngClass"],[1,"img-preview-container"],[3,"ngStyle"],["class","img-loading-overlay",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"img-loading-overlay"],[1,"img-spinning-circle"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[3,"value"]],template:function(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",0),u.YNc(1,h,2,0,"h4",1),u.YNc(2,T,2,0,"h4",1),u.TgZ(3,"button",2),u._UZ(4,"i",3),u._uU(5,"Back"),u.qZA(),u.qZA(),u.TgZ(6,"div",4),u.TgZ(7,"form",5),u.NdJ("ngSubmit",function(){return t.onSubmit()}),u.TgZ(8,"div",6),u.TgZ(9,"div",7),u.TgZ(10,"h5"),u._uU(11,"User Description"),u.qZA(),u.TgZ(12,"span",8),u._UZ(13,"hr"),u.qZA(),u.YNc(14,v,4,2,"div",9),u.YNc(15,N,4,0,"div",10),u.YNc(16,b,4,5,"div",9),u.YNc(17,_,4,0,"div",10),u.YNc(18,I,4,0,"div",10),u.YNc(19,E,6,5,"div",10),u.YNc(20,D,16,12,"div",11),u.YNc(21,B,16,12,"div",11),u.TgZ(22,"div",12),u.TgZ(23,"label"),u._uU(24,"Bio"),u.qZA(),u._UZ(25,"textarea",13),u.qZA(),u.TgZ(26,"div",12),u.TgZ(27,"label"),u._uU(28,"Select Image"),u.qZA(),u.TgZ(29,"input",14,15),u.NdJ("change",function(){u.CHM(e);const i=u.MAs(30);return t.processFile(i)}),u.qZA(),u.qZA(),u.YNc(31,j,5,9,"div",16),u.TgZ(32,"div",12),u.TgZ(33,"label"),u._uU(34,"Picture"),u.qZA(),u._UZ(35,"input",17),u.YNc(36,z,2,1,"div",11),u.qZA(),u.TgZ(37,"div",12),u.TgZ(38,"label"),u._uU(39,"Discord ID"),u.qZA(),u._UZ(40,"input",18),u.YNc(41,ee,2,1,"div",11),u.qZA(),u.TgZ(42,"div",19),u.TgZ(43,"label"),u._uU(44,"Role"),u.qZA(),u.TgZ(45,"div",20),u.TgZ(46,"select",21),u.YNc(47,te,2,2,"option",22),u.qZA(),u.qZA(),u.qZA(),u.TgZ(48,"div"),u.TgZ(49,"button",23),u._uU(50," Cancel "),u.qZA(),u._uU(51,"\xa0 "),u.TgZ(52,"button",24),u.YNc(53,ie,1,0,"span",11),u._uU(54," \xa0Save\xa0 "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}2&e&&(u.xp6(1),u.Q6J("ngIf",t.isAddMode),u.xp6(1),u.Q6J("ngIf",!t.isAddMode),u.xp6(5),u.Q6J("formGroup",t.form),u.xp6(7),u.Q6J("ngIf",t.isAddMode),u.xp6(1),u.Q6J("ngIf",!t.isAddMode),u.xp6(1),u.Q6J("ngIf",t.isAddMode&&!t.isVTI),u.xp6(1),u.Q6J("ngIf",t.isVTI),u.xp6(1),u.Q6J("ngIf",!t.isAddMode),u.xp6(1),u.Q6J("ngIf",t.isAddMode),u.xp6(1),u.Q6J("ngIf",t.isVTI),u.xp6(1),u.Q6J("ngIf",!t.isVTI),u.xp6(4),u.Q6J("ngClass",u.VKq(20,M,t.submitted&&t.f.BIO.errors)),u.xp6(6),u.Q6J("ngIf",t.selectedFile),u.xp6(4),u.Q6J("ngClass",u.VKq(22,M,t.submitted&&t.f.PICTURE.errors)),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.PICTURE.errors),u.xp6(4),u.Q6J("ngClass",u.VKq(24,M,t.submitted&&t.f.DISCORD_ID.errors)),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.DISCORD_ID.errors),u.xp6(6),u.Q6J("ngForOf",t.rules),u.xp6(5),u.Q6J("disabled",t.loading),u.xp6(1),u.Q6J("ngIf",t.loading))},directives:[r.O5,n.rH,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,r.mk,s.wV,s.EJ,r.sg,m.w9,s.On,r.PC,s.YN,s.Kr],styles:['.image-upload-container[_ngcontent-%COMP%]{cursor:pointer}.img-preview-container[_ngcontent-%COMP%]{background-color:#f7f7f7;position:relative}.img-preview-container[_ngcontent-%COMP%]   .img-preview[_ngcontent-%COMP%]{background:center center no-repeat;background-size:contain;height:116px;width:116px}.img-preview-container[_ngcontent-%COMP%]   .img-preview-error[_ngcontent-%COMP%]{display:none}.img-loading-overlay[_ngcontent-%COMP%]{background-color:#000;bottom:0;left:0;opacity:.2;position:absolute;right:0;top:0}.img-spinning-circle[_ngcontent-%COMP%]{display:inline-block;width:64px;height:64px;margin:auto;position:absolute;top:0;left:0;bottom:0;right:0}.img-spinning-circle[_ngcontent-%COMP%]:after{content:" ";display:block;width:46px;height:46px;margin:1px;border-radius:50%;border:5px solid #fff;border-color:#fff transparent #fff transparent;-webkit-animation:lds-dual-ring 1.2s linear infinite;animation:lds-dual-ring 1.2s linear infinite}@-webkit-keyframes lds-dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes lds-dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),e})(),ne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&u._UZ(0,"router-outlet")},directives:[n.lC],encapsulation:2}),e})();var oe=i(74693),ae=i.n(oe),le=i(7333),ue=i(94968);function ce(e,t){1&e&&(u.TgZ(0,"span"),u._UZ(1,"i",39),u.qZA())}function de(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td",24),u.TgZ(2,"div",25),u.TgZ(3,"div",26),u._UZ(4,"img",27),u.qZA(),u.TgZ(5,"div",28),u.TgZ(6,"p"),u.TgZ(7,"a",29),u._uU(8),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(9,"td",24),u.TgZ(10,"p"),u.TgZ(11,"a",30),u._uU(12),u.qZA(),u.qZA(),u.qZA(),u.TgZ(13,"td",24),u.TgZ(14,"p"),u._uU(15),u.qZA(),u.qZA(),u.TgZ(16,"td",24),u.TgZ(17,"p"),u.TgZ(18,"a",31),u._uU(19),u.qZA(),u.qZA(),u.qZA(),u.TgZ(20,"td"),u.TgZ(21,"div",32),u.TgZ(22,"button",33),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw().confirmBox("confirm",t)}),u._UZ(23,"i",34),u.qZA(),u._uU(24,"\xa0 "),u.TgZ(25,"button",35),u._UZ(26,"i",36),u.qZA(),u._uU(27,"\xa0 "),u.TgZ(28,"button",37),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw().confirmBox("delete",t)}),u.YNc(29,ce,2,0,"span",38),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit,i=u.oxw();u.xp6(4),u.s9C("src",i.apiurl+e.PICTURE,u.LSH),u.xp6(3),u.MGl("href","/profile/",e.USERNAME,"",u.LSH),u.xp6(1),u.AsE("",e.FIRST_NAME," ",e.LAST_NAME,""),u.xp6(3),u.MGl("title","ID: ",e.COMPANY_ID,""),u.xp6(1),u.Oqu(e.COMPANY_NAME),u.xp6(3),u.Oqu(e.PHONE),u.xp6(4),u.Oqu(e.USERNAME),u.xp6(6),u.MGl("routerLink","edit/",e.ID,""),u.xp6(3),u.Q6J("disabled",e.isDeleting),u.xp6(1),u.Q6J("ngIf",!e.isDeleting)}}const ge=function(e,t){return{itemsPerPage:e,currentPage:t}},pe=[{path:"user-management",component:ne,children:[{path:"",component:(()=>{class e{constructor(e,t,i,s,r){this.usersService=e,this.rulesService=t,this.bpService=i,this.imageService=s,this.alertService=r,this.subs=new a.Y,this.users=null,this.rules=null,this.bp=null,this.p=1,this.count=10,this.countdata=null,this.apiurl=l.N.apiUrl+"/image/"}ngOnInit(){this.subs.add(this.usersService.getAll().pipe((0,o.P)()).subscribe(e=>{this.users=e,this.countdata=this.users.length})),this.subs.add(this.rulesService.getAll().pipe((0,o.P)()).subscribe(e=>this.rules=e)),this.subs.add(this.bpService.getAll().pipe((0,o.P)()).subscribe(e=>this.bp=e))}deleteUser(e){this.alertService.loading();const t=this.users.find(t=>t.ID===e.ID);this.subs.add(this.usersService.delete(e.ID).pipe((0,o.P)()).subscribe(()=>{t.isDeleting=!0,this.users=this.users.filter(t=>t.ID!==e.ID),this.countdata=this.users.length,this.alertService.success(),this.subs.add(this.imageService.deleteImage(t.PICTURE).pipe((0,o.P)()).subscribe())},e=>{this.alertService.error(e)}))}roleIdToName(e){let t;try{t=this.rules.find(t=>t.ROLE_ID==e).ROLE_NAME}catch(i){}finally{return t}}companyIdToName(e){let t;try{t=this.bp.find(t=>t.COMPANY_ID=e).COMPANY_NAME}catch(i){}finally{return t}}resendEmail(e){e.PASSWORD=e.USERNAME,this.alertService.loading(),this.subs.add(this.usersService.resendemail(e).pipe((0,o.P)()).subscribe(()=>{this.alertService.success()},e=>{this.alertService.error(e)}))}confirmBox(e,t){"delete"==e&&ae().fire({title:"Are you sure want to delete?",text:t.USERNAME,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(e=>{e.value&&this.deleteUser(t)}),"confirm"==e&&ae().fire({title:"Are you sure want to resend email?",text:"this action will reset password "+t.USERNAME,icon:"question",showCancelButton:!0,confirmButtonText:"Yes, send email!",cancelButtonText:"Cancel"}).then(e=>{e.value&&this.resendEmail(t)})}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(c.x),u.Y36(g.P),u.Y36(p.m),u.Y36(A.C),u.Y36(d.c9))},e.\u0275cmp=u.Xpm({type:e,selectors:[["ng-component"]],decls:54,vars:12,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","add",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-plus","mr-5"],[1,"tables-wrapper"],[1,"row"],[1,"col-lg-12"],[1,"card-style","mb-30"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","py-3"],[1,"left"],[1,"right"],[1,"table-search","d-flex"],["action","#"],["type","text","name","something","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"lni","lni-search-alt"],[1,"table-wrapper","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"pt-10","d-flex","flex-wrap","justify-content-between"],[1,"text-sm","text-gray"],[1,"text-right"],[3,"pageChange"],[1,"min-width"],[1,"lead"],[1,"lead-image"],["alt","",3,"src"],[1,"lead-text"],[3,"href"],["data-toggle","tooltip",2,"cursor","pointer",3,"title"],["data-toggle","tooltip"],[1,"action"],[1,"text-primary",2,"cursor","pointer",3,"click"],[1,"lni","lni-reply"],[1,"text-primary",2,"cursor","pointer",3,"routerLink"],[1,"lni","lni-pencil-alt"],[1,"text-danger",3,"disabled","click"],[4,"ngIf"],[1,"lni","lni-trash-can"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"h4",1),u._uU(2,"Users Management"),u.qZA(),u.TgZ(3,"button",2),u._UZ(4,"i",3),u._uU(5," Add "),u.qZA(),u.qZA(),u.TgZ(6,"div",4),u.TgZ(7,"div",5),u.TgZ(8,"div",6),u.TgZ(9,"div",7),u.TgZ(10,"div",8),u._UZ(11,"div",9),u.qZA(),u.TgZ(12,"div",10),u.TgZ(13,"div",11),u.TgZ(14,"p"),u._uU(15,"Show "),u.TgZ(16,"span"),u._uU(17,"10"),u.qZA(),u._uU(18," entries"),u.qZA(),u.qZA(),u.TgZ(19,"div",12),u.TgZ(20,"div",13),u.TgZ(21,"form",14),u.TgZ(22,"input",15),u.NdJ("ngModelChange",function(e){return t.filterdata=e}),u.qZA(),u.TgZ(23,"button"),u._UZ(24,"i",16),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(25,"div",17),u.TgZ(26,"table",18),u.TgZ(27,"thead"),u.TgZ(28,"tr"),u.TgZ(29,"th"),u.TgZ(30,"h6"),u._uU(31,"Name"),u.qZA(),u.qZA(),u.TgZ(32,"th"),u.TgZ(33,"h6"),u._uU(34,"Company"),u.qZA(),u.qZA(),u.TgZ(35,"th"),u.TgZ(36,"h6"),u._uU(37,"Phone No"),u.qZA(),u.qZA(),u.TgZ(38,"th"),u.TgZ(39,"h6"),u._uU(40,"Email"),u.qZA(),u.qZA(),u.TgZ(41,"th"),u.TgZ(42,"h6"),u._uU(43,"Action"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(44,"tbody"),u.YNc(45,de,30,11,"tr",19),u.ALo(46,"paginate"),u.ALo(47,"filter"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(48,"div",20),u.TgZ(49,"div",11),u.TgZ(50,"p",21),u._uU(51),u.qZA(),u.qZA(),u.TgZ(52,"div",22),u.TgZ(53,"pagination-controls",23),u.NdJ("pageChange",function(e){return t.p=e}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(22),u.Q6J("ngModel",t.filterdata),u.xp6(23),u.Q6J("ngForOf",u.xi3(46,3,u.xi3(47,6,t.users,t.filterdata),u.WLB(9,ge,t.count,t.p))),u.xp6(6),u.hij("Total ",t.countdata," users"))},directives:[n.rH,s._Y,s.JL,s.F,s.Fj,s.JJ,s.On,r.sg,le.LS,r.O5],pipes:[le._s,ue.Z],encapsulation:2}),e})()},{path:"add",component:re},{path:"edit/:id",component:re}]}];let Ze=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[n.Bz.forChild(pe)],n.Bz]}),e})(),fe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[r.ez,s.UX,Ze,m.A0,s.u5,le.JX,ue.h]]}),e})()}}]);